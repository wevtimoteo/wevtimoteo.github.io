
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <title>Definindo item ativo no menu no Phoenix Framework usando Short-circuit Evaluation - wevtimoteo</title>

    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/prism.css">

    <style>
      img {
        max-width: 800px;
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <header id="top">
        <h1><a href="/">wevtimoteo</a></h1>
        <p>kairos _ sharing _ tech _ learning _ kaizen _ path</p>
      </header>

      <nav>
        
<ul>
  <li><a href="/posts">Posts</a></li>
  <li><a href="/about.html">About</a></li>
</ul>

      </nav>

      <hr />

      <main><h1 id="definindo-item-ativo-no-menu-no-phoenix-framework-usando-short-circuit-evaluation">Definindo item ativo no menu no Phoenix Framework usando Short-circuit Evaluation</h1><p>Posted on Friday, 29 Dec 2023 by Weverton Timoteo</p><p>Tags:</p><ul><li><a href="/tags/elixir">elixir</a></li><li><a href="/tags/phoenixframework">phoenixframework</a></li><li><a href="/tags/ptbr">ptbr</a></li></ul><ul><li><a href="https://wevtimoteo.github.io/posts/2023-12-29-definindo-item-ativo-no-menu-no-phoenix-framework.html">Read en-US version</a></li></ul><p>Ao desenvolver aplica√ß√µes web, muitas vezes precisamos marcar itens de menu, abas ou outras partes da interface do usu√°rio como ativos. No <a href="https://phoenixframework.org/">Phoenix Framework</a>, fazendo isso de forma r√°pida, pode ser que voc√™ chegue nesse resultado:</p><pre><code class="elixir">&lt;.link
  href={~p&quot;/lojas/#{@store}/produtos&quot;}
  class={&quot;tab&quot; &lt;&gt; if @active == :products, do: &quot; tab-active&quot;, else: &quot;&quot;}
&gt;
  Produtos
&lt;/.link&gt;</code></pre><p>Nessa abordagem, usamos express√µes tern√°rias e concatena√ß√£o de strings para definir classes do CSS condicionalmente. Funciona, mas conforme a l√≥gica condicional aumenta, isso pode ficar dif√≠cil de ler e manter.</p><h2 id="apresentando-o-short-circuit-evaluation">Apresentando o Short-circuit Evaluation</h2><p>No Elixir, <strong>lazy evaluation</strong> e <strong>short-circuit evaluation</strong> muitas vezes s√£o usadas de forma intercambi√°vel. No entanto, h√° uma pequena diferen√ßa. A lazy evaluation geralmente √© associada a estruturas de dados mais complexas, enquanto o short-circuit √© <strong>mais comum em express√µes booleanas</strong>. E √© isso que iremos usar.</p><p>Vamos dar uma olhada em alguns exemplos usando o <code class="inline">iex</code>:</p><pre><code class="elixir">list = [&quot;plataformatec&quot;, nil, &quot;sourcelevel&quot;, false, &quot;dashbit&quot;]
#=&gt; [&quot;plataformatec&quot;, nil, &quot;sourcelevel&quot;, false, &quot;dashbit&quot;]

# Utilizando o short-circuit evaluation na lista
list = [&quot;plataformatec&quot;, nil &amp;&amp; &quot;sourcelevel&quot;, false &amp;&amp; &quot;dashbit&quot;]
#=&gt; [&quot;plataformatec&quot;, nil, false]</code></pre><p>Na segunda defini√ß√£o da lista, estamos usando uma opera√ß√£o de short-circuit, onde o √∫ltimo valor da express√£o prevalece quando o anterior √© verdadeiro; caso contr√°rio, o valor anterior √© mantido.</p><p>Em termos simples, √© como dizer ao <a href="https://elixir-lang.org/">Elixir</a>: ‚Äúpare de pensar assim que souber a resposta‚Äù.</p><h2 id="aplicando-short-circuit-na-lista-de-classes-do-css">Aplicando short-circuit na lista de classes do CSS</h2><p>Numa <a href="https://github.com/phoenixframework/phoenix_html/issues/276#issuecomment-584911356">issue do Phoenix Framework #276</a>, foi discutida uma abordagem usando a lazy evaluation para a sintaxe das classes. <a href="https://github.com/phoenixframework/phoenix_html/issues/276#issuecomment-742375950">Nesse coment√°rio</a>, ficou claro que, se o item da lista for <code class="inline">false</code> ou <code class="inline">nil</code>, ele ser√° removido. Podemos aplicar essa solu√ß√£o ao nosso exemplo:</p><pre><code class="elixir">&lt;.link
  href={~p&quot;/lojas/#{@store}/produtos&quot;}
  class={[&quot;tab&quot;, @active == :products &amp;&amp; &quot;tab-active&quot;]}
&gt;
  Produtos
&lt;/.link&gt;</code></pre><p>Se <code class="inline">@active</code> for <code class="inline">:products</code>, a string <code class="inline">&quot;tab-active&quot;</code> ser√° adicionada √† lista (ficando <code class="inline">tab tab-active</code>), caso contr√°rio, ela ser√° exclu√≠da (ficando apenas <code class="inline">tab</code>). Essa abordagem √© mais limpa, leg√≠vel e eficiente:</p><ol><li><strong>Concis√£o de C√≥digo</strong>: A sintaxe da lazy evaluation √© mais concisa, resultando em c√≥digo mais limpo.
</li><li><strong>Efici√™ncia</strong>: A lazy evaluation interrompe a avalia√ß√£o assim que o resultado √© conhecido, evitando avalia√ß√µes desnecess√°rias.
</li><li><strong>Legibilidade</strong>: A lista de classes √© f√°cil de entender e manter, melhorando a legibilidade do c√≥digo.
</li><li><strong>Facilidade de Manuten√ß√£o</strong>: A sintaxe simplificada facilita a manuten√ß√£o do c√≥digo ao longo do tempo.
</li></ol><p>Ao desenvolver aplica√ß√µes em Elixir, n√£o basta usar o paradigma funcional, mas tamb√©m escrever c√≥digo conciso e f√°cil de entender. Essa abordagem n√£o apenas simplifica nosso c√≥digo, mas tamb√©m torna a manuten√ß√£o mais f√°cil e direta. üòé‚ú®</p></main>

      <hr />

      <footer>
        
<a href="https://dev.to/wevtimoteo" target="_blank" style="float: right">
  <img src="https://d2fltix0v2e0sb.cloudfront.net/dev-badge.svg" alt="Weverton Timoteo's DEV Profile" height="30" width="30">
</a>

<a href="https://github.com/wevtimoteo/wevtimoteo.github.io" target="_blank" style="float: right;margin-right: 10px">
  <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg enable-background="new 0 0 30 30" height="30px" id="Layer_1" version="1.1" viewBox="0 0 512 512" width="30px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path clip-rule="evenodd" d="M296.133,354.174c49.885-5.891,102.942-24.029,102.942-110.192   c0-24.49-8.624-44.448-22.67-59.869c2.266-5.89,9.515-28.114-2.734-58.947c0,0-18.139-5.898-60.759,22.669   c-18.139-4.983-38.09-8.163-56.682-8.163c-19.053,0-39.011,3.18-56.697,8.163c-43.082-28.567-61.22-22.669-61.22-22.669   c-12.241,30.833-4.983,53.057-2.718,58.947c-14.061,15.42-22.677,35.379-22.677,59.869c0,86.163,53.057,104.301,102.942,110.192   c-6.344,5.452-12.241,15.873-14.507,30.387c-12.702,5.438-45.808,15.873-65.758-18.592c0,0-11.795-21.31-34.012-22.669   c0,0-22.224-0.453-1.813,13.592c0,0,14.96,6.812,24.943,32.653c0,0,13.6,43.089,76.179,29.48v38.543   c0,5.906-4.53,12.702-15.865,10.89C96.139,438.977,32.2,354.626,32.2,255.77c0-123.807,100.216-224.022,224.03-224.022   c123.347,0,224.023,100.216,223.57,224.022c0,98.856-63.946,182.754-152.828,212.688c-11.342,2.266-15.873-4.53-15.873-10.89   V395.45C311.1,374.577,304.288,360.985,296.133,354.174L296.133,354.174z M512,256.23C512,114.73,397.263,0,256.23,0   C114.73,0,0,114.73,0,256.23C0,397.263,114.73,512,256.23,512C397.263,512,512,397.263,512,256.23L512,256.23z" fill="#0D2636" fill-rule="evenodd"/></g></svg>
</a>

<p>
  Powered by <a href="https://github.com/Dalgona/Serum">Serum</a> v1.5.1,
  with <a href="https://github.com/Dalgona/serum-theme-essence">Essence</a> theme
</p>

      </footer>
    </div>

    <script src="/assets/js/prism.js"></script>
  </body>
</html>
<script>
const ws_url = "ws://" + location.host + "/serum_live_reloader";
var ws;

connect();

function connect() {
  ws = new WebSocket(ws_url);
  ws.onmessage = onMessage;
  ws.onclose = onClose;
}

function onMessage(e) {
  if (e.data === "reload") {
    location.reload();
  }
}

function onClose(e) {
  console.warn("WebSocket disconnected from server. Reconnecting in 10 seconds.");
  setTimeout(connect, 10000)
}
</script>
